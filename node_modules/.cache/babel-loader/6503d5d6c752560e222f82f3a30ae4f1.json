{"ast":null,"code":"var _jsxFileName = \"/home/sagar/reactProjects/searchbar/src/components/pages/SearchPage.js\";\nimport React, { Component } from 'react';\nimport DisplaySuggestions from '../DisplaySuggestions';\nimport '../styles/index.css';\nimport { Redirect } from 'react-router-dom';\nexport default class SearchPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userInput: \"\",\n      activeSuggestion: 0,\n      patients: [],\n      patientSearchResult: [],\n      redirect: false,\n      displaySuggestions: false\n    };\n\n    this.onChange = e => {\n      const searchTerm = e.target.value; //this.setState({activeSuggestion :0})\n\n      this.setState({\n        userInput: e.target.value\n      });\n      this.searchPatients(searchTerm);\n    };\n\n    this.onSubmit = selectedText => {\n      this.setState({\n        userInput: selectedText\n      });\n    };\n\n    this.searchPatients = searchTerm => {\n      const patients = this.state.patients;\n      const pattern = \"[A-Za-z.s]*\".concat(searchTerm, \"[A-Za-z.s]*\");\n      const matchRegex = new RegExp(pattern);\n      const patientSearchResultFiltered = patients.filter(item => matchRegex.test(item.name || item.phone));\n      const patientSearchResult = patientSearchResultFiltered.slice(0, 4);\n      this.setState({\n        patientSearchResult\n      });\n    };\n\n    this.onInput = e => {\n      if (e.target.value !== \"\") this.showSuggestions();else this.hideSuggestions();\n    };\n\n    this.showSuggestions = () => {\n      this.setState({\n        displaySuggestions: true\n      });\n    };\n\n    this.hideSuggestions = () => {\n      this.setState({\n        displaySuggestions: false\n      });\n    };\n\n    this.setSearchText = text => {\n      console.log(text);\n      this.setState({\n        userInput: text //displaySuggestions:false\n\n      });\n    };\n\n    this.onKeyDown = e => {\n      e.preventDefault();\n\n      if (e.keyCode === 13) {\n        this.setState({\n          activeSuggestion: 0,\n          displaySuggestions: false,\n          userInput: patientSearchResult[activeSuggestion]\n        });\n      } else if (e.keyCode === 38) {\n        if (activeSuggestion === 0) {\n          return;\n        }\n\n        this.setState({\n          activeSuggestion: activeSuggestion - 1\n        });\n      } else if (e.keyCode === 40) {\n        if (activeSuggestion - 1 === patientSearchResult.length) {\n          return;\n        }\n\n        this.setState({\n          activeSuggestion: activeSuggestion + 1\n        });\n      }\n    };\n  }\n\n  async fetchData() {\n    const patients = await fetch('/resources/patient.json').catch(err => console.log(err));\n    this.setState({\n      patients: (await patients.json()).patients\n    });\n  }\n\n  componentDidMount() {\n    console.log(\"I am in component\");\n    this.fetchData();\n  }\n\n  render() {\n    const _this$state = this.state,\n          displaySuggestions = _this$state.displaySuggestions,\n          patientSearchResult = _this$state.patientSearchResult;\n    /*if(this.state.redirect === true){\n        return <Redirect to='/doctorDashboard' />\n    }*/\n\n    return React.createElement(\"div\", {\n      className: \"searchbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"doctor-searchBox-input\",\n      type: \"search\",\n      placeholder: \"search for patient\",\n      name: \"text\",\n      value: this.state.userInput,\n      onInput: this.onInput,\n      onKeyDown: this.onKeyDown,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(DisplaySuggestions, {\n      displaySuggestions: displaySuggestions,\n      patientSearchResult: patientSearchResult,\n      setSearchText: this.setSearchText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/sagar/reactProjects/searchbar/src/components/pages/SearchPage.js"],"names":["React","Component","DisplaySuggestions","Redirect","SearchPage","state","userInput","activeSuggestion","patients","patientSearchResult","redirect","displaySuggestions","onChange","e","searchTerm","target","value","setState","searchPatients","onSubmit","selectedText","pattern","matchRegex","RegExp","patientSearchResultFiltered","filter","item","test","name","phone","slice","onInput","showSuggestions","hideSuggestions","setSearchText","text","console","log","onKeyDown","preventDefault","keyCode","length","fetchData","fetch","catch","err","json","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DisplaySuggestions from '../DisplaySuggestions';\nimport '../styles/index.css';\n\n\nimport {Redirect} from 'react-router-dom';\n\n\nexport default class SearchPage extends Component {\n\n    state ={\n        userInput:\"\",\n        activeSuggestion:0,\n        patients:[],\n        patientSearchResult:[],\n        redirect:false,\n        displaySuggestions:false\n    }\n\n    async fetchData (){\n        const patients = await fetch('/resources/patient.json').catch(\n            err =>console.log(err)\n        )\n        this.setState({patients:(await patients.json()).patients});\n    }\n\n    componentDidMount(){\n        console.log(\"I am in component\")\n        this.fetchData();\n    }\n\n    onChange = (e) => {\n\n        const searchTerm = e.target.value;\n        //this.setState({activeSuggestion :0})\n        this.setState({userInput: e.target.value })\n        this.searchPatients(searchTerm);\n    }\n\n    onSubmit = (selectedText) =>{\n       this.setState({\n           userInput: selectedText\n       }) \n    }\n\n    searchPatients = (searchTerm) => {\n\n        const {patients} = this.state;\n\n        const pattern = `[A-Za-z.\\s]*${searchTerm}[A-Za-z.\\s]*`;\n\n        const matchRegex = new RegExp(pattern);\n\n        const patientSearchResultFiltered = patients.filter(item => \n            matchRegex.test(item.name||item.phone)\n        );\n\n        const patientSearchResult = patientSearchResultFiltered.slice(0,4)\n\n        this.setState({patientSearchResult})\n    }\n\n  \n    /*onSubmit = (e) => {\n        \n        e.preventDefault();\n        this.setState({\n            redirect : true\n        })\n        }*/       \n\n    onInput = (e) => {\n        if(e.target.value !== \"\") this.showSuggestions();\n        else this.hideSuggestions();\n    }\n\n    showSuggestions = () => {\n        this.setState({\n            displaySuggestions: true\n        })\n    }\n\n    hideSuggestions = () => {\n        this.setState({\n            displaySuggestions :false\n        })\n    }\n\n    setSearchText =  (text) => {\n        console.log(text)\n        this.setState({\n            userInput :  text,\n            //displaySuggestions:false\n        })\n    }\n\n    onKeyDown = (e) => {\n        e.preventDefault();\n        if(e.keyCode===13){\n            this.setState({\n                activeSuggestion :0,\n                displaySuggestions:false,\n                userInput:patientSearchResult[activeSuggestion]\n            })\n\n        }else if(e.keyCode === 38){\n            if(activeSuggestion === 0){\n                return\n            }\n            this.setState({activeSuggestion :activeSuggestion - 1})\n        }else if(e.keyCode === 40){\n            if(activeSuggestion -1 === patientSearchResult.length){\n                return\n            }\n            this.setState({activeSuggestion :activeSuggestion + 1})\n        }\n\n    }\n\n\n\n    render() {\n        const {displaySuggestions , patientSearchResult} = this.state;     \n\n        /*if(this.state.redirect === true){\n            return <Redirect to='/doctorDashboard' />\n        }*/\n        return (\n            <div className = \"searchbox\">\n                \n                    <input className =\"doctor-searchBox-input\"\n                     type =\"search\"\n                     placeholder=\"search for patient\"\n                     name =\"text\"\n                     value ={this.state.userInput}\n                     onInput ={this.onInput}\n                     onKeyDown ={this.onKeyDown}\n                     onChange ={this.onChange} />       \n            <DisplaySuggestions \n                    displaySuggestions={displaySuggestions}\n                    patientSearchResult={patientSearchResult}\n                    setSearchText ={this.setSearchText}\n                    \n            /> \n                </div>\n\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}